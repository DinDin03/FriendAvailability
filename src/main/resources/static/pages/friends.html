<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friends - LinkUp</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="dashboard">
<!-- Header Navigation -->
<header class="dashboard-header">
    <nav class="dashboard-nav">
        <div class="nav-brand">
            <h2>ðŸ“… LinkUp</h2>
        </div>
        <div class="nav-center">
            <a href="dashboard.html" class="nav-btn">Dashboard</a>
            <a href="friends.html" class="nav-btn active">Friends</a>
            <a href="availability.html" class="nav-btn">Calendar</a>
            <a href="schedule.html" class="nav-btn">Schedule</a>
            <a href="profile.html" class="nav-btn">Profile</a>
        </div>
        <div class="nav-user">
            <div class="user-info">
                <span id="userName">Loading...</span>
                <img id="userAvatar" src="" alt="Profile" class="user-avatar">
            </div>
            <button onclick="logout()" class="btn btn-outline btn-small">Logout</button>
        </div>
    </nav>
</header>

<div class="dashboard-container">
    <!-- Page Header -->
    <div class="section-header">
        <h1>Friends</h1>
        <p>Manage your connections and see their availability</p>
    </div>

    <!-- Quick Stats -->
    <div class="stats-row">
        <div class="stat-card">
            <div class="stat-icon">ðŸ‘¥</div>
            <div class="stat-content">
                <div class="stat-number" id="totalFriends">0</div>
                <div class="stat-label">Total Friends</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ðŸ“¨</div>
            <div class="stat-content">
                <div class="stat-number" id="pendingRequests">0</div>
                <div class="stat-label">Pending Requests</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ðŸ“¤</div>
            <div class="stat-content">
                <div class="stat-number" id="sentRequests">0</div>
                <div class="stat-label">Sent Requests</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">ðŸŸ¢</div>
            <div class="stat-content">
                <div class="stat-number" id="onlineFriends">0</div>
                <div class="stat-label">Available Now</div>
            </div>
        </div>
    </div>

    <!-- Friend Requests Section -->
    <div class="card">
        <div class="card-header">
            <h3>Friend Requests</h3>
            <button onclick="refreshRequests()" class="btn btn-secondary btn-small">Refresh</button>
        </div>
        <div id="requestsContainer" class="requests-container">
            <div class="loading">Loading friend requests...</div>
        </div>
    </div>

    <!-- Add Friends Section -->
    <div class="card">
        <div class="card-header">
            <h3>Add Friends</h3>
            <p class="card-subtitle">Send friend requests by user ID or email</p>
        </div>
        <div class="card-body">
            <form id="sendRequestForm" class="friend-request-form">
                <div class="form-group">
                    <label for="fromUserId">Your User ID</label>
                    <input type="number" id="fromUserId" placeholder="Your ID" required readonly>
                </div>
                <div class="form-group">
                    <label for="toUserId">Friend's User ID</label>
                    <input type="number" id="toUserId" placeholder="Enter friend's ID" required>
                </div>
                <button type="submit" class="btn btn-primary">Send Friend Request</button>
            </form>
        </div>
    </div>

    <!-- Friends List Section -->
    <div class="card">
        <div class="card-header">
            <h3>Your Friends</h3>
            <div class="card-actions">
                <input type="text" id="friendSearch" placeholder="Search friends..." class="search-input">
                <button onclick="refreshFriends()" class="btn btn-secondary btn-small">Refresh</button>
            </div>
        </div>
        <div id="friendsContainer" class="friends-container">
            <div class="loading">Loading your friends...</div>
        </div>
    </div>

    <!-- All Users Section (for finding new friends) -->
    <div class="card">
        <div class="card-header">
            <h3>Find New Friends</h3>
            <p class="card-subtitle">Browse all users to send friend requests</p>
        </div>
        <div id="allUsersContainer" class="users-container">
            <div class="loading">Loading users...</div>
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div id="loadingOverlay" class="loading-overlay" style="display: none;">
    <div class="loading-spinner">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>
</div>

<!-- Message Container for Success/Error Messages -->
<div id="messageContainer" class="message-container"></div>

<!-- Include JavaScript -->
<script src="shared.js"></script>
<script src="friends.js"></script>
</body>
</html>